<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.69.0" />
    <meta name="description" content="A DevSecOps Workshop Day using openShift and ACS">
<meta name="author" content="GÃ¶tz, Daniel">

    <link rel="icon" href="https://devsecops-workshop.github.io/images/favicon.png" type="image/png">

    <title>Inner Loop :: DevSecOps Workshop</title>

    
    <link href="https://devsecops-workshop.github.io/css/nucleus.css?1680688236" rel="stylesheet">
    <link href="https://devsecops-workshop.github.io/css/fontawesome-all.min.css?1680688236" rel="stylesheet">
    <link href="https://devsecops-workshop.github.io/css/hybrid.css?1680688236" rel="stylesheet">
    <link href="https://devsecops-workshop.github.io/css/featherlight.min.css?1680688236" rel="stylesheet">
    <link href="https://devsecops-workshop.github.io/css/perfect-scrollbar.min.css?1680688236" rel="stylesheet">
    <link href="https://devsecops-workshop.github.io/css/auto-complete.css?1680688236" rel="stylesheet">
    <link href="https://devsecops-workshop.github.io/css/atom-one-dark-reasonable.css?1680688236" rel="stylesheet">
    <link href="https://devsecops-workshop.github.io/css/theme.css?1680688236" rel="stylesheet">
    <link href="https://devsecops-workshop.github.io/css/tabs.css?1680688236" rel="stylesheet">
    <link href="https://devsecops-workshop.github.io/css/hugo-theme.css?1680688236" rel="stylesheet">
    
    <link href="https://devsecops-workshop.github.io/css/theme-red.css?1680688236" rel="stylesheet">
    
    

    <script src="https://devsecops-workshop.github.io/js/jquery-3.3.1.min.js?1680688236"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
<script src="https://devsecops-workshop.github.io/js/custom.js"></script>
  </head>
  <body class="" data-url="/3-inner-loop/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://devsecops-workshop.github.io/">
    <img src="https://devsecops-workshop.github.io/images/acs-logo.png">
  </a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="https://devsecops-workshop.github.io/js/lunr.min.js?1680688236"></script>
<script type="text/javascript" src="https://devsecops-workshop.github.io/js/auto-complete.js?1680688236"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/devsecops-workshop.github.io\/";
    
</script>
<script type="text/javascript" src="https://devsecops-workshop.github.io/js/search.js?1680688236"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='https://devsecops-workshop.github.io/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-intro/" title="The DevSecOps Workshop" class="dd-item
        
        
        
        ">
      <a href="https://devsecops-workshop.github.io/1-intro/">
          The DevSecOps Workshop
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-prepare-cluster/" title="Prepare Cluster" class="dd-item
        
        
        
        ">
      <a href="https://devsecops-workshop.github.io/2-prepare-cluster/">
          Prepare Cluster
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3-inner-loop/" title="Inner Loop" class="dd-item
        
        active
        
        ">
      <a href="https://devsecops-workshop.github.io/3-inner-loop/">
          Inner Loop
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4-outer-loop/" title="Outer Loop" class="dd-item
        
        
        
        ">
      <a href="https://devsecops-workshop.github.io/4-outer-loop/">
          Outer Loop
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/5-gitops/" title="Configure GitOps" class="dd-item
        
        
        
        ">
      <a href="https://devsecops-workshop.github.io/5-gitops/">
          Configure GitOps
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/10-rhacs-setup/" title="Install and Configure ACS" class="dd-item
        
        
        
        ">
      <a href="https://devsecops-workshop.github.io/10-rhacs-setup/">
          Install and Configure ACS
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/11-rhacs-warmup/" title="Getting to know ACS" class="dd-item
        
        
        
        ">
      <a href="https://devsecops-workshop.github.io/11-rhacs-warmup/">
          Getting to know ACS
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/12-create-policy/" title="Create a Custom Security Policy" class="dd-item
        
        
        
        ">
      <a href="https://devsecops-workshop.github.io/12-create-policy/">
          Create a Custom Security Policy
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/13-rhacs-pipeline/" title="Integrating ACS into the Pipeline" class="dd-item
        
        
        
        ">
      <a href="https://devsecops-workshop.github.io/13-rhacs-pipeline/">
          Integrating ACS into the Pipeline
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/15-runtime-security/" title="Securing Runtime Events" class="dd-item
        
        
        
        ">
      <a href="https://devsecops-workshop.github.io/15-runtime-security/">
          Securing Runtime Events
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/16-acm/" title="Advanced Cluster Management" class="dd-item
        
        
        
        ">
      <a href="https://devsecops-workshop.github.io/16-acm/">
          Advanced Cluster Management
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/20-appendix/" title="Appendix" class="dd-item
        
        
        
        ">
      <a href="https://devsecops-workshop.github.io/20-appendix/">
          Appendix
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://devsecops-workshop.github.io/"><i class='fas fa-home'></i> Homepage</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='https://devsecops-workshop.github.io/'></a> > Inner Loop
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#install-and-prepare-red-hat-openshift-dev-spaces">Install and Prepare Red Hat OpenShift Dev Spaces</a></li>
    <li><a href="#clone-the-quarkus-application-code">Clone the Quarkus Application Code</a></li>
    <li><a href="#access-openshift-and-create-the-development-stage-project">Access OpenShift and Create the Development Stage Project</a></li>
    <li><a href="#use-odo-to-deploy-and-update-our-application">Use odo to Deploy and Update our Application</a></li>
    <li><a href="#architecture-recap">Architecture recap</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Inner Loop
            </h1>
          

        



	<p>In this part of the workshop you&rsquo;ll experience how modern software development using the OpenShift tooling can be done in a fast, iterative way. <strong>Inner loop</strong> here means <strong>this is the way</strong>, sorry, <strong>process</strong>, for developers to try out new things and quickly change and test their code on OpenShift without having to build new images all the time or being a Kubernetes expert.
<img src="../images/loop.png" alt="Inner Loop"></p>
<h2 id="install-and-prepare-red-hat-openshift-dev-spaces">Install and Prepare Red Hat OpenShift Dev Spaces</h2>
<p><strong>OpenShift Dev Spaces</strong> is a browser-based IDE for Cloud Native Development. All the heavy lifting is done though a container running your workspace on OpenShift. All you really need is a laptop. You can easily switch and setup customized environment, plugin, build tools and runtimes. So switching from one project context to another is as easy a switching a website. No more endless installation and configuration marathons on your dev laptop. It is already part of your OpenShift subscription. If you want to find out more have a look <a href="https://developers.redhat.com/products/openshift-dev-spaces/overview">here</a></p>
<ul>
<li>Install the <strong>Red Hat OpenShift Dev Spaces</strong> Operator from OperatorHub (not the previous Codeready Workspaces versions!) with default settings</li>
<li>Go to <strong>Installed Operators -&gt; Red Hat OpenShift Dev Spaces</strong> and create a new instance (<strong>Red Hat OpenShift Dev Spaces instance Specification</strong>) using the default settings in the project <code>openshift-operators</code></li>
<li>Wait until deployment has finished. This may take a couple of minutes as several components will be deployed.</li>
<li>Once the instance status is ready (You can check the YAML of the instance: <code>status &gt; chePhase: Active</code>), look up the <code>devspaces</code> Route in the <code>openshift-workspaces</code> namespace (You may need to toggle the <strong>Show default project</strong> button).</li>
<li>Open the link in a new browser tab, click on <strong>Log in with OpenShift</strong> and log in with your OCP credentials</li>
<li>Allow selected permissions</li>
</ul>

<div class="notices tip" ><p>We could create a workspace from one of the templates that come with CodeReady Workspaces, but we want to use a customized workspace with some additionally defined plugins in a <a href="https://devfile.io/">v2 devfile</a> in our git repo. With devfiles you can share a complete workspace setup and with the click of a link and you will end up in a fully configured project in your browser.</p>
</div>

<ul>
<li>In the left menu click on <strong>Create Workspace</strong></li>
<li>Copy the <strong>raw URL</strong> of the <code>devspaces_devfile.yml</code> file in your <code>Gitea</code> repository by clicking on the file and then on the <strong>Raw</strong> button (or <strong>Originalversion</strong> in German).</li>
<li>Paste the full URL into the <strong>Git Repo URL</strong> field and click <strong>Create &amp; Open</strong></li>
</ul>
<figure>
    <img src="../images/crw.png?width=50pc&amp;classes=border,shadow"/> <figcaption>
            <h4>Click image to enlarge</h4>
        </figcaption>
</figure>

<ul>
<li>You&rsquo;ll get into the <strong>Creating a workspace &hellip;</strong> view, give the workspace containers some time to spin up.</li>
</ul>
<p>When your workspace has finally started, have a good look around in the UI. It should look familiar if you have ever worked with VSCode or similar IDEs.</p>

<div class="notices tip" ><p>While working with Dev Spaces make sure you have AdBlockers disabled, you are not on a VPN and a have good internet connection to ensure a stable setup. If you are facing any issues try to reload the Browser window. If that doesn&rsquo;t help restart the workspace in the main Dev Spaces site under <strong>Workspaces</strong> and then menu <strong>Restart Workspace</strong></p>
</div>

<h2 id="clone-the-quarkus-application-code">Clone the Quarkus Application Code</h2>
<p>As an example you&rsquo;ll create a new Java application. You don&rsquo;t need to have prior experience programming in Java as this will be kept really simple.</p>

<div class="notices tip" ><p>We will use a Java application based on the <a href="https://quarkus.io/">Quarkus</a> stack. Quarkus enables you to create much smaller and faster containerized Java applications than ever before. You can even transcompile these apps to native Linux binaries that start blazingly fast. The app that we will use is just a starter sample created with the <a href="https://code.quarkus.io/">Quarkus Generator</a> with a simple RESTful API that answers to http Requests. But at the end of the day this setup will work with any Java application. <strong>Fun fact:</strong> Every OpenShift Subscription already comes with a Quarkus Subscription.</p>
</div>

<p>Let&rsquo;s clone our project into our workspace :</p>
<ul>
<li>Bring up your <code>OpenShiftDev Spaces</code> in your browser</li>
<li>In center of the editor area click on <strong>Clone Git Repository &hellip;.</strong> and then at the top enter the <code>Git URL</code> to your <code>Gitea</code> Repo (You can copy the URL by clicking on the clipboard icon in Gitea) and press enter</li>
<li>In the following dialog <strong>Choose a folder to clone &hellip;</strong>
<ul>
<li>Navigate up 2 directories by clicking <strong>..</strong> twice</li>
<li>Select the folder <strong>projects</strong></li>
<li>Click the button <strong>OK</strong></li>
</ul>
</li>
<li>In the following dialog when asked how to open the code, click on <strong>Open</strong></li>
<li>The windows will briefly reload and then you will be in the cloned project folder</li>
</ul>
<h2 id="access-openshift-and-create-the-development-stage-project">Access OpenShift and Create the Development Stage Project</h2>
<p>Now we want to create a new OpenShift project for our app:</p>
<ul>
<li>Open a <code>terminal</code> in your DevSpaces IDE
<ul>
<li>In the top left &lsquo;hamburger&rsquo; menu click on <strong>Terminal &gt; New Terminal</strong>)</li>
</ul>
</li>
<li>The <code>oc</code> OpenSHift cli client is already installed and you are already logged into the cluster</li>
<li>So go ahead and create a new project <code>workshop-dev</code></li>
</ul>
<pre><code>oc new-project workshop-dev
</code></pre><h2 id="use-odo-to-deploy-and-update-our-application">Use odo to Deploy and Update our Application</h2>
<p><strong>odo</strong> or &lsquo;OpenShift do&rsquo; is a cli that enables developers to get started quickly with cloud native app development without being a Kubernetes expert. It offers support for multiple runtimes and you can easily setup microservice components, push code changes into running containers and debug remotely with just a few simple commands. To find out more, have look <a href="https://odo.dev/">here</a></p>
<p>First we need to switch into the folder of your cloned project</p>
<pre><code>cd quarkus-build-options
</code></pre><p><code>odo</code> is smart enough to figure out what programming language and frameworks you are using. So let&rsquo;s let initialize our project</p>
<pre><code>odo init
</code></pre><ul>
<li>You can then opt-into telemetry <strong>(Y/n)</strong></li>
<li>A matching Quarkus DevFile is found in the odo repository. Choose <strong>Y</strong> to download</li>
<li>You can select a container in which odo will be started. Hit <strong>Enter</strong> (None)</li>
<li>As componenten name keep the suggestion. Hit <strong>Enter</strong></li>
</ul>
<p><code>odo</code> is not intialized for your app. Let&rsquo;s deploy the app to openshift in odo dev mode</p>
<pre><code>odo dev
</code></pre><p>This will compile the app, start a pod in the OpenShift project and inject the app.</p>
<p>There will be a couple of popups in the bottom right corner</p>
<p><img src="../images/devspaces_popup.png" alt="DevSpaces Popups"></p>
<ul>
<li>&ldquo;A new process is listening &hellip;&rdquo; -&gt; Choose <strong>Yes</strong></li>
<li>&ldquo;Redirect is not enabled &hellip;&rdquo; &ndash;&gt; Click on <strong>Open in New Tab</strong></li>
<li>&ldquo;Do you want VS Code - Open SOurce to open an external website&rdquo; &ndash;&gt; Choose <strong>Open</strong></li>
</ul>
<p>A new tab will open and show the webpage of your app. You may have to wait a reload in a few seconds.</p>
<p>To test the app:</p>
<p>Your app should show up as a simple web page. In the <code>RESTEasy JAX-RS</code> section click the <code>@Path</code> endpoint <code>/hello</code> to see the result.</p>
<p>Now for the fun part: Using <code>odo</code> you can just dynamically change your code and push it out again without doing a new image build! No dev magic involved:</p>
<ul>
<li>
<p>In your DevWorkspace on the left, expand the file tree to open file <code>src/main/java/org/acme/GreetingRessource.java</code> and change the string &ldquo;Hello RESTEasy&rdquo; to &ldquo;Hello Workshop&rdquo; (DevSpaces saves every edit directly. No need to save)</p>
</li>
<li>
<p>And reload the app webpage.</p>
</li>
<li>
<p>Bam! The change should be there in a matter of seconds</p>
</li>
</ul>
<h2 id="architecture-recap">Architecture recap</h2>
<figure>
    <img src="../images/workshop_architecture_inner_loop.png?width=50pc&amp;classes=border,shadow"/> <figcaption>
            <h4>Click image to enlarge</h4>
        </figcaption>
</figure>






<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="https://devsecops-workshop.github.io/2-prepare-cluster/" title="Prepare Cluster"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="https://devsecops-workshop.github.io/4-outer-loop/" title="Outer Loop" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://devsecops-workshop.github.io/js/clipboard.min.js?1680688236"></script>
    <script src="https://devsecops-workshop.github.io/js/perfect-scrollbar.min.js?1680688236"></script>
    <script src="https://devsecops-workshop.github.io/js/perfect-scrollbar.jquery.min.js?1680688236"></script>
    <script src="https://devsecops-workshop.github.io/js/jquery.sticky.js?1680688236"></script>
    <script src="https://devsecops-workshop.github.io/js/featherlight.min.js?1680688236"></script>
    <script src="https://devsecops-workshop.github.io/js/highlight.pack.js?1680688236"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://devsecops-workshop.github.io/js/modernizr.custom-3.6.0.js?1680688236"></script>
    <script src="https://devsecops-workshop.github.io/js/learn.js?1680688236"></script>
    <script src="https://devsecops-workshop.github.io/js/hugo-learn.js?1680688236"></script>
    
        
            <script src="https://devsecops-workshop.github.io/mermaid/mermaid.js?1680688236"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
